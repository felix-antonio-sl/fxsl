# KODA Artifact: Protocolo de Auditor√≠a Ontol√≥gica 360¬∞ (Gist)
# URN: urn:knowledge:fxsl:gist:guide-onto-gist-001-audit-protocol:1.0.0
---
_manifest:
  urn: "urn:knowledge:fxsl:gist:guide-onto-gist-001-audit-protocol:1.0.0"
  federation:
    visibility: internal
    license: "CC-BY-NC-4.0"
  compatibility:
    min_consumer_version: "1.0.0"
    breaking_changes_from: null
  resolution:
    canonical_url: "file://knowledge/domains/gist/guide_onto_gist_001_audit_protocol_koda.yml"
    mirrors: []
  dependencies:
    requires:
      - urn: "urn:knowledge:koda:core:spec:1.0.0"
        reason: "KODA/Spec base"
      - urn: "urn:knowledge:koda:core:transform:1.0.0"
        reason: "KODA/Transform methodology"
  provenance:
    created_by: "FS"
    created_at: "2026-01-23"
    last_modified_by: "KODA-TRANSFORMER (GPT-5.2)"
    last_modified_at: "2026-01-23"
    signature: null

ID: GUIDE-ONTO-GIST-AUDIT-001
Version: 1.0.0
Status: Draft
Human-Creator: "FS"
Human-Editor: "FS"
Model-Collaborator: "GPT-5.2"
Creation-Date: 2026-01-23
Modification-Date: 2026-01-23
Source: "staging/d.md"
Ctx: "Auditor√≠a ontol√≥gica (360¬∞): prop√≥sito, estructura, sem√°ntica, sintaxis; SPARQL/OWL/SHACL; foco en Gist como ontolog√≠a upper/patrones reutilizables."

LLM_Parsing_Instructions:
  ID: KODA-LLM-PARSER-01
  Req: Mandatory block following Metadata.
  Prohib: Using for artifact creation or translation.
  Content: |

    BEGIN_LLM_INSTRUCTIONS
    You are an AI agent consuming a KODA artifact. Parse with absolute fidelity.

    FIDELITY: Preserve meat (essential information) and skeleton (structure: headers, IDs, lists, tables) with zero loss. Ignore fat (filler words, rhetoric, stylistic prose).

    LEXICON (expand before processing): Act->Action, Cond->Condition, Ctx->Context, Ctx_Required->Required External Reference, Ctx_Optional->Optional External Reference, Def->Definition, Ex->Example, Mssn->Mission, Obj->Objective, Proc->Process, Purp->Purpose, Ref->Reference, XRef->Cross-Artifact Reference, XRef_Required->Mandatory Cross-Artifact Reference, Req->Requirement, Res->Result, Src->Source, Prohib->Prohibition, Warn->Warning, Just->Justification, Rec->Recommendation

    REFERENCE POLICY: Ref: is internal only‚Äîmust point to existing ID within THIS document. XRef/XRef_Required: are external only‚Äîmust point to a URN (optionally with #ID fragment) in another artifact. External documents without specific ID use Ctx:, Ctx_Required:, or Ctx_Optional:.

    LANGUAGE POLICY: Keywords in English, content in original language. Never translate content.
    END_LLM_INSTRUCTIONS

XRef_Required:
  - "urn:knowledge:koda:core:spec:1.0.0"
  - "urn:knowledge:koda:core:transform:1.0.0"

Source_Document:
  ID: SRC-ONTO-GIST-AUDIT-001
  Src: "staging/d.md"
  Body: |
    # üõ°Ô∏è Protocolo de Auditor√≠a Ontol√≥gica 360¬∞

    Este protocolo eval√∫a una ontolog√≠a desde su prop√≥sito fundacional hasta su implementaci√≥n t√©cnica, asegurando que el modelo no solo sea v√°lido, sino *√∫til* y *sostenible*.

    ## 1. Cuadrante Pragm√°tico: Prop√≥sito y Alcance (El "Para Qu√©")
    Antes de mirar el c√≥digo, validamos si la ontolog√≠a responde a la realidad que intenta modelar.

    *   **Verificaci√≥n de Competency Questions (CQs)**:
        *   ¬øExisten preguntas de competencia expl√≠citas (e.g., "¬øQu√© empleados trabajan en X proyecto entre fecha Y y Z?")?
        *   ¬øLa ontolog√≠a puede responder estas preguntas mediante consultas SPARQL o inferencia?
    *   **Alineaci√≥n de Alcance**:
        *   **Minimalismo**: ¬øContiene clases/propiedades irrelevantes para el dominio actual? (Detectar "Over-engineering").
        *   **Cobertura**: ¬øFaltan conceptos clave para cubrir los casos de uso definidos?
    *   **Claridad de Audiencia**:
        *   ¬øLas etiquetas (`rdfs:label`) y definiciones (`skos:definition`) son comprensibles para los usuarios finales (humanos) o solo para los m√°quinas?

    ## 2. Cuadrante Estructural: Taxonom√≠a y Arquitectura (El "C√≥mo")
    Evaluamos la solidez del esqueleto del grafo.

    *   **Higiene Taxon√≥mica (`subClassOf`)**:
        *   **Is-a vs. Instance-of**: ¬øSe est√°n usando subclases cuando deber√≠an ser instancias o categor√≠as? (e.g., `HondaCivic` como clase vs. instancia de `CarModel`).
        *   **Ciclos**: Verificar ausencia de ciclos en la jerarqu√≠a de clases y propiedades.
        *   **Profundidad y Anchura**: Detectar jerarqu√≠as demasiado planas (falta de abstraccci√≥n) o demasiado profundas (dif√≠ciles de mantener).
    *   **Higiene de Namespaces**:
        *   **Squatting**: ¬øSe est√°n redefiniendo t√©rminos de ontolog√≠as est√°ndar (Gist, FOAF, schema.org) en el namespace propio?
        *   **Resoluci√≥n**: ¬øLos URIs son dereferenciables o siguen una pol√≠tica clara de identificaci√≥n?
    *   **Patrones de Modelado**:
        *   **Reuso**: ¬øSe reinventa la rueda o se importan patrones probados (e.g., `gist:TemporalRelation`, `gist:Quantity`)?
        *   **Consistencia**: ¬øSe modelan problemas similares de forma id√©ntica en toda la ontolog√≠a?

    ## 3. Cuadrante Sem√°ntico: L√≥gica e Inferencia (El "Qu√© Significa")
    Validamos que el modelo sea l√≥gico y computacionalmente tratable.

    *   **Consistencia L√≥gica (Reasoner Check)**:
        *   Ejecutar un razonador (HermiT, Pellet). ¬øEs la ontolog√≠a consistente?
        *   **Clases Insatisfacibles**: ¬øHay clases que no pueden tener instancias debido a restricciones contradictorias?
    *   **Rigor en Restricciones**:
        *   **Domain/Range**: ¬øSon demasiado restrictivos? (e.g., definir `hasPet` con rango `Dog` rompe si luego quieres a√±adir `Cat`).
        *   **Disjointness**: ¬øEst√°n declaradas las clases disjuntas? (Fundamental para detectar errores de clasificaci√≥n).
    *   **Manejo de Identidad**:
        *   ¬øC√≥mo se maneja la unicidad? (`owl:FunctionalProperty`, `owl:InverseFunctionalProperty`).
        *   ¬øSe confunden cadenas de texto (literales) con entidades (URIs)? (Anti-patr√≥n "String-based linking").

    ## 4. Cuadrante Sint√°ctico: Calidad del Artefacto (El "Soporte")
    Revisi√≥n del c√≥digo y los metadatos.

    *   **Metadatos y Anotaciones**:
        *   ¬øCada clase y propiedad tiene al menos `rdfs:label` y `rdfs:comment` (o `skos:definition`)?
        *   ¬øExiste `owl:Ontology` con `owl:versionInfo`, `dc:creator`, y `dc:license`?
    *   **Validaci√≥n de Sintaxis**:
        *   ¬øEl archivo es un Turtle/RDF/XML v√°lido? (Sin prefijos no declarados, errores de parsing).
    *   **Perfil OWL**:
        *   ¬øSe mantiene dentro del perfil deseado (e.g., OWL 2 DL, OWL 2 QL) para garantizar la complejidad computacional esperada?

    ---

    ### **[Trade-off Semi√≥tico]**
    Una ontolog√≠a perfecta l√≥gicamente (Cuadrante 3) puede ser in√∫til pragm√°ticamente (Cuadrante 1) si es demasiado compleja para ser consultada.
    **Recomendaci√≥n**: Prioriza la "claridad operable" sobre la "perfecci√≥n acad√©mica". Si un patr√≥n Gist simple (como `gist:Category`) resuelve el problema, no implementes una estructura compleja de clases OWL solo por pureza te√≥rica.

    ¬øDeseas que profundice en alguna de estas dimensiones o procedemos a auditar un archivo espec√≠fico?

    ### User Input

    quiero que estas instrcciones sean m√°s profundas y detalladas

    ### Planner Response

    # üõ°Ô∏è Protocolo de Auditor√≠a Ontol√≥gica 360¬∞ ‚Äî Versi√≥n Exhaustiva

    Este protocolo proporciona un marco completo para evaluar ontolog√≠as desde m√∫ltiples dimensiones. Cada cuadrante se subdivide en **dimensiones**, cada dimensi√≥n tiene **criterios de evaluaci√≥n**, **preguntas de verificaci√≥n**, **anti-patrones comunes** y **herramientas/t√©cnicas** recomendadas.

    ---

    ## üìä Matriz de Madurez Ontol√≥gica (MMO)

    Antes de iniciar, establece el nivel de madurez esperado para calibrar la severidad de los hallazgos:

    | Nivel  | Nombre     | Descripci√≥n                                             |
    | ------ | ---------- | ------------------------------------------------------- |
    | **L1** | Prototipo  | Exploraci√≥n inicial, tolerancia alta a inconsistencias  |
    | **L2** | Desarrollo | Modelo en construcci√≥n, requiere consistencia b√°sica    |
    | **L3** | Producci√≥n | Modelo operativo, requiere conformidad estricta         |
    | **L4** | Federado   | Modelo publicado para integraci√≥n externa, m√°ximo rigor |

    ---

    ## 1Ô∏è‚É£ Cuadrante Pragm√°tico: Prop√≥sito, Alcance y Gobernanza

    > *"Una ontolog√≠a sin prop√≥sito claro es un pasivo, no un activo."*

    ### 1.1 Competency Questions (CQs) y Requisitos Funcionales

    #### Criterios de Evaluaci√≥n

    | ID   | Criterio                            | Peso  | L1  | L2  | L3  | L4  |
    | ---- | ----------------------------------- | ----- | --- | --- | --- | --- |
    | P1.1 | Existencia de CQs documentadas      | Alto  | ‚óã   | ‚óè   | ‚óè   | ‚óè   |
    | P1.2 | CQs traducibles a SPARQL            | Alto  | ‚óã   | ‚óã   | ‚óè   | ‚óè   |
    | P1.3 | Cobertura CQs vs clases/propiedades | Medio | ‚óã   | ‚óã   | ‚óè   | ‚óè   |
    | P1.4 | Trazabilidad CQ ‚Üî Stakeholder       | Bajo  | ‚óã   | ‚óã   | ‚óã   | ‚óè   |

    #### Preguntas de Verificaci√≥n

    1. **Existencia**: ¬øExiste un documento que liste las preguntas de competencia?
    2. **Formalizaci√≥n**: Para cada CQ, ¬øse puede escribir una consulta SPARQL que la responda?
    3. **Suficiencia**: ¬øCada clase y propiedad del modelo est√° justificada por al menos una CQ?
    4. **Completitud**: ¬øHay CQs que el modelo actual no puede responder? (Gap Analysis)

    #### Anti-patrones

    | Anti-patr√≥n          | S√≠ntoma                                | Impacto                    |
    | -------------------- | -------------------------------------- | -------------------------- |
    | **CQ-less Ontology** | No hay CQs documentadas                | Imposible validar utilidad |
    | **Orphan Concepts**  | Clases que no participan en ninguna CQ | Complejidad innecesaria    |
    | **Scope Creep**      | CQs que exceden el dominio original    | Modelo inmanejable         |

    #### T√©cnicas de Verificaci√≥n

    ```sparql
    # Verificar que todas las clases participan en al menos un patr√≥n √∫til
    SELECT ?class (COUNT(?s) AS ?instances) (COUNT(?usage) AS ?usages)
    WHERE {
      ?class a owl:Class .
      OPTIONAL { ?s a ?class }
      OPTIONAL { ?usage ?p ?class }
    }
    GROUP BY ?class
    HAVING (COUNT(?s) = 0 && COUNT(?usage) = 0)
    # Resultado: Clases sin instancias ni uso = candidatas a eliminaci√≥n
    ```

    ---

    ### 1.2 Alineaci√≥n de Alcance y Minimalismo

    #### Criterios de Evaluaci√≥n

    | ID   | Criterio                | Descripci√≥n                                      |
    | ---- | ----------------------- | ------------------------------------------------ |
    | P2.1 | **Ratio Clase/CQ**      | Idealmente ‚â§ 3 clases por CQ cubierta            |
    | P2.2 | **√çndice de Reuso**     | % de propiedades reutilizadas vs. creadas ad-hoc |
    | P2.3 | **Densidad Axiom√°tica** | Axiomas por clase (ideal: 2-5 para L3)           |

    #### Preguntas de Verificaci√≥n

    1. **Minimalismo**: ¬øPuede eliminarse alguna clase sin perder capacidad de respuesta a CQs?
    2. **Granularidad**: ¬øEl nivel de detalle es apropiado para los casos de uso? (ni excesivo ni insuficiente)
    3. **Fronteras**: ¬øEst√°n claros los l√≠mites del dominio? ¬øQu√© expl√≠citamente NO se modela?

    #### Checklist de Alcance

    ```markdown
    ‚ñ° Scope Statement documentado (m√°x 3 p√°rrafos)
    ‚ñ° Lista expl√≠cita de "Out of Scope"
    ‚ñ° Versi√≥n y fecha de vigencia
    ‚ñ° Proceso de Change Request definido
    ‚ñ° Responsable de gobernanza identificado
    ```

    ---

    ### 1.3 Audiencia y Usabilidad Humana

    #### Criterios de Evaluaci√≥n

    | ID   | Criterio                        | Verificaci√≥n                                               |
    | ---- | ------------------------------- | ---------------------------------------------------------- |
    | P3.1 | **Legibilidad de Labels**       | ¬ø`rdfs:label` en lenguaje natural, sin camelCase t√©cnico?  |
    | P3.2 | **Completitud de Definiciones** | ¬ø100% de clases tienen `skos:definition` o `rdfs:comment`? |
    | P3.3 | **Ejemplos**                    | ¬øClases complejas tienen `skos:example`?                   |
    | P3.4 | **Multiling√ºismo**              | ¬øLabels en idiomas requeridos con `@lang` tags?            |

    #### Anti-patrones

    | Anti-patr√≥n                 | Ejemplo                               | Correcci√≥n                                              |
    | --------------------------- | ------------------------------------- | ------------------------------------------------------- |
    | **CamelCase Labels**        | `rdfs:label "hasEmploymentRelation"`  | `rdfs:label "tiene relaci√≥n de empleo"@es`              |
    | **Definition-less Classes** | Clase sin `rdfs:comment`              | A√±adir definici√≥n de 1-2 oraciones                      |
    | **Jargon Overload**         | `"RDF reification pattern for n-ary"` | `"Representa una relaci√≥n con m√∫ltiples participantes"` |

    ---

    ### 1.4 Gobernanza y Ciclo de Vida

    #### Criterios de Evaluaci√≥n

    | ID   | Criterio               | Preguntas                                              |
    | ---- | ---------------------- | ------------------------------------------------------ |
    | P4.1 | **Versionamiento**     | ¬øExiste `owl:versionInfo` y pol√≠tica de deprecaci√≥n?   |
    | P4.2 | **Provenance**         | ¬øDocumentado creador, fecha, licencia?                 |
    | P4.3 | **Change Management**  | ¬øProceso para proponer cambios?                        |
    | P4.4 | **Deprecation Policy** | ¬øC√≥mo se marcan t√©rminos obsoletos? (`owl:deprecated`) |

    #### Metadatos Requeridos (L3+)

    ```turtle
    <https://example.org/ontology/domain> a owl:Ontology ;
        owl:versionInfo "1.2.0" ;
        owl:versionIRI <https://example.org/ontology/domain/1.2.0> ;
        owl:priorVersion <https://example.org/ontology/domain/1.1.0> ;
        dc:title "Domain Ontology"@en ;
        dc:creator "Knowledge Team" ;
        dc:created "2025-01-15"^^xsd:date ;
        dc:modified "2026-01-23"^^xsd:date ;
        dc:license <https://creativecommons.org/licenses/by/4.0/> ;
        rdfs:comment "Ontolog√≠a para modelar..."@es .
    ```

    ---

    ## 2Ô∏è‚É£ Cuadrante Estructural: Taxonom√≠a, Arquitectura y Patrones

    > *"La estructura determina el comportamiento del sistema."*

    ### 2.1 Higiene Taxon√≥mica

    #### 2.1.1 An√°lisis de Jerarqu√≠a de Clases

    | ID   | Verificaci√≥n               | M√©todo                                          |
    | ---- | -------------------------- | ----------------------------------------------- |
    | S1.1 | **Ciclos en `subClassOf`** | Query SPARQL o razonador                        |
    | S1.2 | **Profundidad m√°xima**     | Contar niveles (recomendado: ‚â§ 7)               |
    | S1.3 | **Anchura promedio**       | Subclases directas por clase (recomendado: 3-7) |
    | S1.4 | **Clases hu√©rfanas**       | Clases sin superclase (excepto `owl:Thing`)     |
    | S1.5 | **Herencia m√∫ltiple**      | Detectar y validar si es intencional            |

    ```sparql
    # Detectar herencia m√∫ltiple
    SELECT ?class (COUNT(?parent) AS ?parentCount)
    WHERE {
      ?class rdfs:subClassOf ?parent .
      FILTER(?parent != owl:Thing)
    }
    GROUP BY ?class
    HAVING (COUNT(?parent) > 1)
    ```

    #### 2.1.2 Distinci√≥n Class vs. Instance vs. Category

    | Patr√≥n            | Usar Cuando                          | Ejemplo Correcto                             | Anti-patr√≥n                      |
    | ----------------- | ------------------------------------ | -------------------------------------------- | -------------------------------- |
    | **owl:Class**     | Tipos con axiomas formales, estables | `ex:Employee rdfs:subClassOf gist:Person`    | Crear clase por cada variante    |
    | **Instance**      | Individuos espec√≠ficos               | `ex:_Person_JuanPerez a gist:Person`         | `ex:JuanPerez a owl:Class`       |
    | **gist:Category** | Taxonom√≠as flexibles, sin axiomas    | `ex:_EmployeeType_Permanent a gist:Category` | Clase para tipos administrativos |

    #### Preguntas de Verificaci√≥n

    1. ¬øHay clases que deber√≠an ser instancias? (e.g., `ChileCountry` como clase)
    2. ¬øHay instancias que deber√≠an ser clases? (e.g., patr√≥n de datos maestros mal modelado)
    3. ¬øSe usa `gist:Category` para taxonom√≠as administradas por usuarios no-t√©cnicos?

    ---

    ### 2.2 Higiene de Propiedades

    #### 2.2.1 An√°lisis de Object Properties

    | ID   | Verificaci√≥n           | Criterio                                                   |
    | ---- | ---------------------- | ---------------------------------------------------------- |
    | S2.1 | **Inversa declarada**  | ¬øTodas las propiedades navegables tienen inversa?          |
    | S2.2 | **Dominio/Rango**      | ¬øDeclarados pero no excesivamente restrictivos?            |
    | S2.3 | **Caracter√≠sticas**    | ¬øFuncional, transitiva, sim√©trica correctamente aplicadas? |
    | S2.4 | **Naming consistency** | ¬øVerbos para object properties (`hasX`, `isXOf`)?          |

    ```sparql
    # Propiedades sin inversa declarada
    SELECT ?prop WHERE {
      ?prop a owl:ObjectProperty .
      FILTER NOT EXISTS { ?prop owl:inverseOf ?inv }
      FILTER NOT EXISTS { ?inv owl:inverseOf ?prop }
    }
    ```

    #### 2.2.2 An√°lisis de Datatype Properties

    | ID   | Verificaci√≥n               | Criterio                                           |
    | ---- | -------------------------- | -------------------------------------------------- |
    | S2.5 | **Tipo de dato expl√≠cito** | ¬ø`rdfs:range` con `xsd:` datatype?                 |
    | S2.6 | **Magnitudes con unidad**  | ¬øValores medibles usan `gist:Magnitude` pattern?   |
    | S2.7 | **Fechas**                 | ¬øUsan `xsd:date`, `xsd:dateTime` consistentemente? |

    #### Anti-patrones de Propiedades

    | Anti-patr√≥n            | Ejemplo                                                        | Correcci√≥n                               |
    | ---------------------- | -------------------------------------------------------------- | ---------------------------------------- |
    | **Stringly-typed**     | `ex:employeeId "12345"` sin tipo                               | Usar `xsd:integer` o IRI                 |
    | **Direct Measurement** | `ex:weight "75.5"^^xsd:decimal`                                | `gist:Magnitude` con UoM                 |
    | **Embedded Semantics** | `ex:billingAddress`, `ex:shippingAddress` como props separadas | `gist:Address` + `gist:AddressUsageType` |

    ---

    ### 2.3 Higiene de Namespaces e IRIs

    #### Criterios de Evaluaci√≥n

    | ID   | Criterio                     | Verificaci√≥n                                            |
    | ---- | ---------------------------- | ------------------------------------------------------- |
    | S3.1 | **No Namespace Squatting**   | ¬øNo se definen t√©rminos en `gist:`, `foaf:`, `schema:`? |
    | S3.2 | **Consistencia de Prefijos** | ¬øUn solo prefijo por namespace en todo el modelo?       |
    | S3.3 | **Dereferenciabilidad**      | ¬øIRIs resuelven a documentaci√≥n o son opacos?           |
    | S3.4 | **Patr√≥n de IRI**            | ¬øConsistente para clases, propiedades, instancias?      |

    #### Patrones de IRI Recomendados

    ```
    # Ontolog√≠a propia
    https://org.example/ontology/domain/         # TBox (clases, propiedades)
    https://org.example/data/domain/             # ABox (instancias)

    # Instancias con identificador opaco
    https://org.example/data/domain/_Person_abc123   # Prefijo "_" para instancias
    https://org.example/data/domain/_Event_def456

    # Reference Data
    https://org.example/refdata/Country_CL        # Datos de referencia
    ```

    ---

    ### 2.4 Patrones de Modelado y Reuso

    #### 2.4.1 Evaluaci√≥n de Patrones Gist

    | Patr√≥n                   | Aplica Cuando                    | Verificar                                              |
    | ------------------------ | -------------------------------- | ------------------------------------------------------ |
    | **TemporalRelation**     | Relaciones con contexto temporal | ¬øSe modela empleo, membres√≠a, propiedad como relaci√≥n? |
    | **Magnitude + UoM**      | Valores medibles                 | ¬øPeso, precio, distancia usan el patr√≥n?               |
    | **Category**             | Taxonom√≠as flexibles             | ¬øTipos administrativos son categor√≠as?                 |
    | **Address**              | Direcciones f√≠sicas/electr√≥nicas | ¬øSe usa `containedText` + `refersTo`?                  |
    | **Agreement/Commitment** | Contratos, obligaciones          | ¬øHay estructura para partes y t√©rminos?                |

    #### 2.4.2 M√©tricas de Reuso

    ```sparql
    # Calcular √≠ndice de reuso de propiedades
    SELECT 
      (COUNT(DISTINCT ?imported) AS ?importedProps)
      (COUNT(DISTINCT ?custom) AS ?customProps)
      (COUNT(DISTINCT ?imported) * 100.0 / 
       (COUNT(DISTINCT ?imported) + COUNT(DISTINCT ?custom)) AS ?reusePercent)
    WHERE {
      { ?imported a owl:ObjectProperty . FILTER(STRSTARTS(STR(?imported), "https://w3id.org/semanticarts/")) }
      UNION
      { ?custom a owl:ObjectProperty . FILTER(!STRSTARTS(STR(?custom), "https://w3id.org/semanticarts/")) }
    }
    # Objetivo L3+: reusePercent >= 40%
    ```

    ---

    ## 3Ô∏è‚É£ Cuadrante Sem√°ntico: L√≥gica, Inferencia y Consistencia

    > *"La sem√°ntica formal es lo que distingue una ontolog√≠a de un diagrama E-R."*

    ### 3.1 Consistencia L√≥gica

    #### 3.1.1 Verificaci√≥n con Razonador

    | Herramienta | Perfil   | Uso                                  |
    | ----------- | -------- | ------------------------------------ |
    | **HermiT**  | OWL 2 DL | Consistencia, clasificaci√≥n          |
    | **Pellet**  | OWL 2 DL | Consistencia, explicaciones          |
    | **ELK**     | OWL 2 EL | Alto rendimiento, ontolog√≠as grandes |
    | **RDFox**   | OWL 2 RL | Materializaci√≥n, consultas           |

    #### Checklist de Razonamiento

    ```markdown
    ‚ñ° Ontolog√≠a carga sin errores en Prot√©g√©
    ‚ñ° Razonador ejecuta sin timeout (< 60s para L3)
    ‚ñ° No hay clases insatisfacibles
    ‚ñ° No hay inconsistencias detectadas
    ‚ñ° Inferencias son las esperadas (spot check)
    ```

    #### 3.1.2 Clases Insatisfacibles

    ```sparql
    # Despu√©s de clasificaci√≥n, detectar clases equivalentes a owl:Nothing
    SELECT ?class WHERE {
      ?class owl:equivalentClass owl:Nothing .
    }
    ```

    **Causas comunes**:
    - Restricciones contradictorias (e.g., `hasPart min 1` y `hasPart max 0`)
    - Disjointness con superclase
    - Rangos incompatibles en cadena de propiedades

    ---

    ### 3.2 Rigor en Restricciones

    #### 3.2.1 An√°lisis de Domain/Range

    | Escenario                       | Recomendaci√≥n                                       |
    | ------------------------------- | --------------------------------------------------- |
    | **Propiedad general**           | No declarar domain/range (hereda de superpropiedad) |
    | **Propiedad espec√≠fica**        | Domain/Range en clase m√°s general aplicable         |
    | **M√∫ltiples dominios posibles** | Usar `owl:unionOf` o no declarar                    |

    #### Anti-patr√≥n: Over-constrained Properties

    ```turtle
    # ‚ùå Demasiado restrictivo
    ex:hasPet rdfs:domain ex:Person ;
              rdfs:range ex:Dog .
    # Problema: No puedo tener gatos

    # ‚úÖ Flexible
    ex:hasPet rdfs:domain ex:Person ;
              rdfs:range ex:Animal .
    # O mejor: heredar de gist:hasMember sin restricciones adicionales
    ```

    #### 3.2.2 An√°lisis de Disjointness

    | ID   | Verificaci√≥n               | Impacto                                  |
    | ---- | -------------------------- | ---------------------------------------- |
    | L1.1 | **Disjointness expl√≠cita** | ¬øClases hermanas son disjuntas?          |
    | L1.2 | **Covering axioms**        | ¬øUni√≥n de subclases = superclase?        |
    | L1.3 | **Completitud**            | ¬øEl modelo usa CWA o OWA apropiadamente? |

    ```turtle
    # Patr√≥n recomendado: Disjoint siblings
    ex:Employee rdfs:subClassOf ex:Person .
    ex:Customer rdfs:subClassOf ex:Person .
    ex:Employee owl:disjointWith ex:Customer .

    # O usando DisjointUnion (OWL 2)
    ex:Person owl:disjointUnionOf (ex:Employee ex:Customer ex:Prospect) .
    ```

    ---

    ### 3.3 Manejo de Identidad

    #### 3.3.1 Propiedades de Identificaci√≥n

    | Caracter√≠stica                    | Uso                     | Verificar                        |
    | --------------------------------- | ----------------------- | -------------------------------- |
    | **owl:FunctionalProperty**        | Valor √∫nico por sujeto  | ¬ø`hasBirthDate` es funcional?    |
    | **owl:InverseFunctionalProperty** | Identifica un√≠vocamente | ¬ø`hasSSN` es IFP?                |
    | **owl:hasKey**                    | Clave compuesta         | ¬øClases tienen claves definidas? |

    #### 3.3.2 Anti-patr√≥n: String-based Linking

    ```turtle
    # ‚ùå Enlace por string
    ex:_Order_123 ex:customerName "Acme Corp" .
    ex:_Invoice_456 ex:customerName "Acme Corp" .
    # Problema: No hay enlace sem√°ntico, typos rompen integridad

    # ‚úÖ Enlace por IRI
    ex:_Order_123 ex:hasCustomer ex:_Organization_AcmeCorp .
    ex:_Invoice_456 ex:hasCustomer ex:_Organization_AcmeCorp .
    ```

    ---

    ### 3.4 Perfiles OWL y Complejidad Computacional

    | Perfil         | Complejidad | Uso T√≠pico                  | Verificar                   |
    | -------------- | ----------- | --------------------------- | --------------------------- |
    | **OWL 2 Full** | Indecidible | Evitar                      | N/A                         |
    | **OWL 2 DL**   | 2-NEXPTIME  | Ontolog√≠as medianas         | Default                     |
    | **OWL 2 EL**   | PTIME       | Ontolog√≠as grandes (SNOMED) | Sin negaci√≥n, uniones       |
    | **OWL 2 QL**   | AC0         | Query answering             | Sin existenciales complejos |
    | **OWL 2 RL**   | PTIME       | Reglas de inferencia        | Sin existenciales en head   |

    #### Herramienta de Verificaci√≥n

    ```bash
    # Usando OWL API / Prot√©g√©
    # Verificar perfil en: Ontology > Ontology Metrics > OWL Profile
    ```

    ---

    ## 4Ô∏è‚É£ Cuadrante Sint√°ctico: Calidad del Artefacto y Mantenibilidad

    > *"El c√≥digo es poes√≠a; la ontolog√≠a es prosa t√©cnica."*

    ### 4.1 Validaci√≥n Sint√°ctica

    #### 4.1.1 Parseo y Serializaci√≥n

    | Verificaci√≥n            | Herramienta          | Comando                               |
    | ----------------------- | -------------------- | ------------------------------------- |
    | **Turtle v√°lido**       | `rapper`             | `rapper -i turtle -c ontology.ttl`    |
    | **RDF/XML v√°lido**      | `xmllint` + `rapper` | Validar XML + RDF                     |
    | **Prefijos declarados** | Parser               | Sin warnings de prefijos desconocidos |
    | **IRIs v√°lidas**        | Parser               | Sin caracteres ilegales               |

    #### 4.1.2 Estilo y Formato

    ```markdown
    ‚ñ° Indentaci√≥n consistente (2 espacios recomendado)
    ‚ñ° Orden de triples: subject-ordered, luego predicate-ordered
    ‚ñ° Blank lines entre entidades
    ‚ñ° Comentarios Turtle para secciones (#=== CLASSES ===)
    ‚ñ° Prefijos ordenados alfab√©ticamente
    ‚ñ° Un archivo por m√≥dulo (para ontolog√≠as grandes)
    ```

    ---

    ### 4.2 Anotaciones y Documentaci√≥n Inline

    #### Anotaciones Requeridas por Nivel

    | Anotaci√≥n         | L1  | L2  | L3  | L4  |
    | ----------------- | --- | --- | --- | --- |
    | `rdfs:label`      | ‚óè   | ‚óè   | ‚óè   | ‚óè   |
    | `rdfs:comment`    | ‚óã   | ‚óè   | ‚óè   | ‚óè   |
    | `skos:definition` | ‚óã   | ‚óã   | ‚óè   | ‚óè   |
    | `skos:example`    | ‚óã   | ‚óã   | ‚óã   | ‚óè   |
    | `skos:scopeNote`  | ‚óã   | ‚óã   | ‚óã   | ‚óè   |
    | `dc:source`       | ‚óã   | ‚óã   | ‚óã   | ‚óè   |

    #### Query de Completitud de Anotaciones

    ```sparql
    SELECT ?entity 
      (BOUND(?label) AS ?hasLabel) 
      (BOUND(?comment) AS ?hasComment)
      (BOUND(?definition) AS ?hasDefinition)
    WHERE {
      { ?entity a owl:Class } UNION { ?entity a owl:ObjectProperty } UNION { ?entity a owl:DatatypeProperty }
      OPTIONAL { ?entity rdfs:label ?label }
      OPTIONAL { ?entity rdfs:comment ?comment }
      OPTIONAL { ?entity skos:definition ?definition }
    }
    HAVING (!BOUND(?label) || !BOUND(?comment))
    # Resultado: Entidades sin label o comment
    ```

    ---

    ### 4.3 Modularizaci√≥n y Dependencias

    #### Criterios de Modularizaci√≥n

    | ID  | Criterio                 | Verificaci√≥n                               |
    | --- | ------------------------ | ------------------------------------------ |
    | M1  | **Separaci√≥n TBox/ABox** | ¬øOntolog√≠a separada de datos de instancia? |
    | M2  | **M√≥dulos por dominio**  | ¬øSubdominios en archivos separados?        |
    | M3  | **Imports expl√≠citos**   | ¬ø`owl:imports` para dependencias?          |
    | M4  | **Versiones de imports** | ¬øIRIs versionados para imports cr√≠ticos?   |

    #### Patr√≥n de Modularizaci√≥n

    ```
    ontology/
    ‚îú‚îÄ‚îÄ core.ttl                 # Clases y propiedades core
    ‚îú‚îÄ‚îÄ extensions/
    ‚îÇ   ‚îú‚îÄ‚îÄ temporal.ttl         # Extensiones temporales
    ‚îÇ   ‚îî‚îÄ‚îÄ spatial.ttl          # Extensiones espaciales
    ‚îú‚îÄ‚îÄ reference-data/
    ‚îÇ   ‚îú‚îÄ‚îÄ countries.ttl        # Datos de referencia
    ‚îÇ   ‚îî‚îÄ‚îÄ currencies.ttl
    ‚îî‚îÄ‚îÄ bundle.ttl               # Importa todos los m√≥dulos
    ```

    ---

    ### 4.4 Testing y Validaci√≥n Automatizada

    #### SHACL Shapes para Validaci√≥n

    ```turtle
    @prefix sh: <http://www.w3.org/ns/shacl#> .
    @prefix ex: <https://example.org/ns/> .

    ex:PersonShape a sh:NodeShape ;
        sh:targetClass ex:Person ;
        sh:property [
            sh:path ex:hasName ;
            sh:minCount 1 ;
            sh:maxCount 1 ;
            sh:datatype xsd:string ;
            sh:message "Toda persona debe tener exactamente un nombre"@es
        ] ;
        sh:property [
            sh:path ex:hasBirthDate ;
            sh:maxCount 1 ;
            sh:datatype xsd:date ;
            sh:lessThan ex:hasDeathDate ;
            sh:message "Fecha de nacimiento debe ser anterior a fecha de muerte"@es
        ] .
    ```

    #### Pipeline de Validaci√≥n CI/CD

    ```yaml
    # Ejemplo GitHub Actions
    ontology-validation:
      steps:
        - name: Syntax Check
          run: rapper -i turtle -c *.ttl
        
        - name: Consistency Check
          run: java -jar HermiT.jar -c ontology.ttl
        
        - name: SHACL Validation
          run: shacl validate -s shapes.ttl -d data.ttl
        
        - name: Metrics Report
          run: python ontology_metrics.py > report.md
    ```

    ---

    ## üìã Checklist Consolidado de Auditor√≠a

    ### Fase 1: Preparaci√≥n
    ```markdown
    ‚ñ° Identificar nivel de madurez objetivo (L1-L4)
    ‚ñ° Obtener documentaci√≥n de CQs y alcance
    ‚ñ° Identificar stakeholders y audiencia
    ‚ñ° Configurar ambiente (Prot√©g√©, razonador, SHACL processor)
    ```

    ### Fase 2: Auditor√≠a Pragm√°tica (C1)
    ```markdown
    ‚ñ° Verificar existencia y calidad de CQs
    ‚ñ° Validar cobertura CQ ‚Üî Modelo
    ‚ñ° Evaluar minimalismo y alcance
    ‚ñ° Revisar legibilidad de labels/definiciones
    ‚ñ° Verificar metadatos de gobernanza
    ```

    ### Fase 3: Auditor√≠a Estructural (C2)
    ```markdown
    ‚ñ° Analizar jerarqu√≠a de clases (ciclos, profundidad, anchura)
    ‚ñ° Validar distinci√≥n Class/Instance/Category
    ‚ñ° Revisar propiedades (inversas, caracter√≠sticas)
    ‚ñ° Verificar higiene de namespaces
    ‚ñ° Evaluar reuso de patrones est√°ndar
    ```

    ### Fase 4: Auditor√≠a Sem√°ntica (C3)
    ```markdown
    ‚ñ° Ejecutar razonador (consistencia)
    ‚ñ° Verificar clases insatisfacibles
    ‚ñ° Analizar restricciones domain/range
    ‚ñ° Validar disjointness
    ‚ñ° Revisar manejo de identidad
    ‚ñ° Confirmar perfil OWL
    ```

    ### Fase 5: Auditor√≠a Sint√°ctica (C4)
    ```markdown
    ‚ñ° Validar parsing sin errores
    ‚ñ° Verificar estilo y formato
    ‚ñ° Evaluar completitud de anotaciones
    ‚ñ° Revisar modularizaci√≥n
    ‚ñ° Verificar dependencias (imports)
    ‚ñ° Evaluar existencia de tests (SHACL)
    ```

    ### Fase 6: Reporte y Recomendaciones
    ```markdown
    ‚ñ° Clasificar hallazgos por severidad (Critical/Major/Minor/Info)
    ‚ñ° Proporcionar ejemplos de correcci√≥n
    ‚ñ° Priorizar acciones correctivas
    ‚ñ° Documentar trade-offs de dise√±o
    ‚ñ° Generar m√©tricas comparativas
    ```

    ---

    ## üìä Plantilla de Reporte de Auditor√≠a

    ```markdown
    # Reporte de Auditor√≠a Ontol√≥gica
    **Ontolog√≠a**: [Nombre]
    **Versi√≥n**: [X.Y.Z]
    **Fecha**: [YYYY-MM-DD]
    **Auditor**: [Nombre/Agente]
    **Nivel Objetivo**: [L1-L4]

    ## Resumen Ejecutivo
    | Cuadrante   | Score    | Estado |
    | ----------- | -------- | ------ |
    | Pragm√°tico  | X/10     | üî¥/üü°/üü¢  |
    | Estructural | X/10     | üî¥/üü°/üü¢  |
    | Sem√°ntico   | X/10     | üî¥/üü°/üü¢  |
    | Sint√°ctico  | X/10     | üî¥/üü°/üü¢  |
    | **Total**   | **X/40** |        |

    ## Hallazgos Cr√≠ticos
    1. [Hallazgo con impacto y correcci√≥n]

    ## Hallazgos Mayores
    1. [Hallazgo con impacto y correcci√≥n]

    ## Hallazgos Menores
    1. [Hallazgo con impacto y correcci√≥n]

    ## M√©tricas
    - Total Clases: X
    - Total Propiedades: X (Object: Y, Datatype: Z)
    - Total Instancias: X
    - √çndice de Reuso: X%
    - Densidad Axiom√°tica: X axiomas/clase
    - Cobertura de Anotaciones: X%

    ## Recomendaciones Priorizadas
    1. [Acci√≥n] - Urgencia: Alta/Media/Baja
    ```

Protocol_360_Telegrafized:
  ID: ONTO-GIST-AUDIT-PROTOCOL-360
  Purp: Evaluar ontolog√≠a end-to-end; asegurar validez+utilidad+sostenibilidad.
  Src:
    Ref: SRC-ONTO-GIST-AUDIT-001

  Dimensions:
    - Dimension: Pragmatic (Cuadrante 1)
      ID: ONTO-AUDIT-Q1-PRAGMATIC
      Focus: "Prop√≥sito+alcance+audiencia (Para qu√©)."
      Checks:
        - ID: ONTO-AUDIT-Q1-CQ-01
          Req: "CQs expl√≠citas; trazabilidad CQ‚Üîmodelo."
          Ex: "¬øQu√© empleados trabajan en X proyecto entre fecha Y y Z?"
          Res: "Capacidad de responder v√≠a SPARQL e/o inferencia."
        - ID: ONTO-AUDIT-Q1-SCOPE-01
          Req: "Alineaci√≥n alcance: minimalismo (sin over-engineering) + cobertura (sin gaps)."
        - ID: ONTO-AUDIT-Q1-AUDIENCE-01
          Req: "Labels/definiciones comprensibles (rdfs:label, rdfs:comment, skos:definition)."

    - Dimension: Structural (Cuadrante 2)
      ID: ONTO-AUDIT-Q2-STRUCTURAL
      Focus: "Taxonom√≠a+arquitectura (C√≥mo)."
      Checks:
        - ID: ONTO-AUDIT-Q2-TAXO-01
          Req:
            - "Is-a vs Instance-of vs Category (evitar subClassOf incorrecto)."
            - "Sin ciclos en jerarqu√≠a clases/propiedades."
            - "Profundidad/anchura razonables; evitar demasiado plano/profundo."
          Ex: "`HondaCivic` como clase vs instancia de `CarModel`."
        - ID: ONTO-AUDIT-Q2-NS-01
          Req:
            - "Sin namespace squatting (no redefinir Gist/FOAF/schema.org)."
            - "Pol√≠tica de IRI; URIs dereferenciables o regla clara."
        - ID: ONTO-AUDIT-Q2-PATTERNS-01
          Req:
            - "Reuso de patrones probados (ej: gist:TemporalRelation, gist:Quantity)."
            - "Consistencia de modelado para problemas similares."

    - Dimension: Semantic (Cuadrante 3)
      ID: ONTO-AUDIT-Q3-SEMANTIC
      Focus: "L√≥gica+inferencia (Qu√© significa)."
      Checks:
        - ID: ONTO-AUDIT-Q3-REASONER-01
          Act: "Ejecutar razonador (ej: HermiT, Pellet)."
          Req: "Ontolog√≠a consistente; detectar clases insatisfacibles."
        - ID: ONTO-AUDIT-Q3-RESTRICTIONS-01
          Req:
            - "Domain/Range no excesivamente restrictivos."
            - "Disjointness declarado cuando corresponde."
          Ex: "`hasPet` con rango `Dog` rompe al agregar `Cat`."
        - ID: ONTO-AUDIT-Q3-IDENTITY-01
          Req:
            - "Unicidad/identidad expl√≠cita (owl:FunctionalProperty, owl:InverseFunctionalProperty)."
            - "Evitar anti-patr√≥n String-based linking (literales vs URIs)."

    - Dimension: Syntactic (Cuadrante 4)
      ID: ONTO-AUDIT-Q4-SYNTACTIC
      Focus: "Artefacto: c√≥digo+metadatos (Soporte)."
      Checks:
        - ID: ONTO-AUDIT-Q4-METADATA-01
          Req:
            - "Clases/propiedades con rdfs:label y rdfs:comment (o skos:definition)."
            - "owl:Ontology con owl:versionInfo, dc:creator, dc:license."
        - ID: ONTO-AUDIT-Q4-SYNTAX-01
          Req: "Parsing v√°lido (Turtle/RDF/XML); sin prefijos no declarados."
        - ID: ONTO-AUDIT-Q4-OWL-PROFILE-01
          Req: "Mantener perfil OWL objetivo (ej: OWL 2 DL/QL) seg√∫n complejidad esperada."

  Tradeoff_Semiotic:
    ID: ONTO-AUDIT-TRADEOFF-01
    Def: "Perfecci√≥n l√≥gica puede degradar utilidad pragm√°tica si el modelo es demasiado complejo para consultar."
    Rec: "Priorizar claridad operable; si `gist:Category` resuelve, evitar estructuras OWL complejas por pureza."

  Outputs:
    - Output: "Checklist consolidado, plantilla de reporte, queries (SPARQL), shapes (SHACL), ejemplos metadatos (Turtle), pipeline CI/CD."
      Src:
        Ref: SRC-ONTO-GIST-AUDIT-001
