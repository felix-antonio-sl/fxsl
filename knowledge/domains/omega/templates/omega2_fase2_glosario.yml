# Glosario de Datos del Sistema
# Template Omega 2.0 - Fase 2: Datos (Vista üì¶)
# Formato: YAML ejecutable

_metadata:
  sistema: "[Nombre del Sistema]"
  version: "1.0"
  fecha: "[YYYY-MM-DD]"
  autor: "[Nombre]"

LLM_Parsing_Instructions:
  ID: KODA-LLM-PARSER-01
  Req: Mandatory block following Metadata.
  Prohib: Using for artifact creation or translation.
  Content: |
    BEGIN_LLM_INSTRUCTIONS
    You are an AI agent consuming a KODA artifact. Parse with absolute fidelity.

    FIDELITY: Preserve meat (essential information) and skeleton (structure: headers, IDs, lists, tables) with zero loss. Ignore fat (filler words, rhetoric, stylistic prose).

    LEXICON (expand before processing): Act->Action, Cond->Condition, Ctx->Context, Ctx_Required->Required External Reference, Ctx_Optional->Optional External Reference, Def->Definition, Ex->Example, Mssn->Mission, Obj->Objective, Proc->Process, Purp->Purpose, Ref->Reference, XRef->Cross-Artifact Reference, XRef_Required->Mandatory Cross-Artifact Reference, Req->Requirement, Res->Result, Src->Source, Prohib->Prohibition, Warn->Warning, Just->Justification, Rec->Recommendation

    REFERENCE POLICY: Ref: is internal only‚Äîmust point to existing ID within THIS document. XRef/XRef_Required: are external only‚Äîmust point to a URN (optionally with #ID fragment) in another artifact. External documents without specific ID use Ctx:, Ctx_Required:, or Ctx_Optional:.

    LANGUAGE POLICY: Keywords in English, content in original language. Never translate content.
    END_LLM_INSTRUCTIONS

# =============================================================================
# ENTIDADES
# =============================================================================

entidades:
  # --- Ejemplo de Entidad Tipo Persona ---
  - id: ENT-001
    nombre: "Ciudadano"
    nombre_plural: "Ciudadanos"
    tipo: Persona # [Persona | Documento | Evento | Recurso | Concepto | Lugar]
    descripcion: "Individuo que interact√∫a con el sistema como beneficiario o solicitante"
    identidad: ID # [ID | Valor] - ¬øSe distingue por clave √∫nica o por contenido?
    due√±o: "Registro Civil" # ¬øQui√©n es responsable de su integridad?
    estados: [] # Vac√≠o si es inmutable
    atributos:
      - nombre: rut
        tipo: Identificador
        obligatorio: true
      - nombre: nombre_completo
        tipo: Texto
        obligatorio: true

  # --- Ejemplo de Entidad Tipo Documento con Estados ---
  - id: ENT-002
    nombre: "Solicitud"
    nombre_plural: "Solicitudes"
    tipo: Documento
    descripcion: "Petici√≥n formal de un ciudadano para obtener un servicio"
    identidad: ID
    due√±o: "Oficina de Partes"
    estados: ["Borrador", "Ingresada", "En Evaluaci√≥n", "Aprobada", "Rechazada"]
    atributos:
      - nombre: fecha_ingreso
        tipo: Fecha
        obligatorio: true
      - nombre: monto_solicitado
        tipo: Moneda
        obligatorio: false

  # --- Agregar m√°s entidades aqu√≠ ---
  # - id: ENT-003
  #   nombre: "[...]"

# =============================================================================
# RELACIONES
# =============================================================================

relaciones:
  - id: REL-001
    nombre: "presenta"
    desde: ENT-001 # Ciudadano
    hacia: ENT-002 # Solicitud
    cardinalidad: "1:N" # Un ciudadano puede presentar muchas solicitudes
    descripcion: "Un Ciudadano presenta una o m√°s Solicitudes"

  # --- Agregar m√°s relaciones aqu√≠ ---
  # - id: REL-002
  #   nombre: "[verbo]"
  #   desde: ENT-XXX
  #   hacia: ENT-YYY

# =============================================================================
# INVARIANTES (Reglas que SIEMPRE deben cumplirse)
# =============================================================================

invariantes:
  - id: INV-001
    descripcion: "Toda Solicitud debe tener exactamente un Ciudadano asociado"
    afecta: [ENT-002, REL-001]
    severidad: ERROR # [ERROR | WARNING]

  - id: INV-002
    descripcion: "Una Solicitud Aprobada no puede volver a estado Borrador"
    afecta: [ENT-002]
    severidad: ERROR

# =============================================================================
# VALIDACI√ìN
# =============================================================================

_validacion:
  - check: "Cada sustantivo del Canvas de Prop√≥sito tiene entrada aqu√≠"
    status: "[OK | PENDIENTE]"
  - check: "Cada entidad tiene al menos 1 atributo definido"
    status: "[OK | PENDIENTE]"
  - check: "Cada entidad con estados tiene al menos 2 estados"
    status: "[OK | PENDIENTE]"
